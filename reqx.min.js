var ReqX=function(t){if(!(this instanceof ReqX))return new ReqX(t);this.version="1.2 (Beta)";var n=this,a=0,c=[],e=[];t||(t={}),t.json===!0&&(t.contentType="application/json",t.dataType="json",t.accepts="json");var o=function(){a++},i=function(t){a--,t&&(c||(c=[]),c.push(t),n.error_callback&&n.error_callback(t)),0==a&&(e.length>0&&r(),e.splice(0,1),n.callback&&e.length<1&&1>a&&((!c||c.length<1)&&(c=null),n.callback(c),n.callback=null))},r=function(){if(!(e.length<1)){var t=e[0];n.ajax(t.url,t.method,t.data,t.callback)}};return this.done=function(t){return"function"!=typeof t?console.warn("ReqX.done() only accepts functions"):(n.callback=t,this)},this.error=function(t){return"function"!=typeof t?console.warn("ReqX.errors() only accepts functions"):(n.error_callback=t,this)},this.ajax=function(c,r,s,l){var u=function(){return t.sync&&a>0?void e.unshift({url:c,method:r,data:s,callback:l}):void n.ajax(c,r,s,l)};if(t.sync&&a>0){var h={url:c,method:r,data:s,callback:l};return e.push(h),this}return"function"==typeof r&&(l=r,s=r=void 0),"function"==typeof s&&(l=s,s=void 0),1==t.json&&"object"==typeof s&&(s=JSON.stringify(s)),o(),$.ajax({url:c,cache:t.cache||!0,type:r||t.default_method||"GET",data:s||{},dataType:t.dataType,contentType:t.contentType,accepts:t.accepts}).done(function(t){l&&l(null,t,u),i()}).error(function(t){l&&l(t,null,u),i(t)}),this},this.get=function(t,n,a){return n||(a=n,n=void 0),this.ajax(t,"GET",n,a),this},this.post=function(t,n,a){return n||(a=n,n=void 0),this.ajax(t,"POST",n,a),this},this.put=function(t,n,a){return n||(a=n,n=void 0),this.ajax(t,"PUT",n,a),this},this};
