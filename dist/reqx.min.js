!function(e){"use strict";function t(){for(var e={},r=0;r<arguments.length;r++)for(var o in arguments[r])if(arguments[r].hasOwnProperty(o)){var n=arguments[r][o];n instanceof Element||"object"!=typeof n||Array.isArray(n)||(n=t(e[o],n)),e[o]=n}return e}function r(e){if(!(this instanceof r)){var o="Class constructor Reqx cannot be invoked without 'new'";throw"function"==typeof window.TypeError&&(o=new TypeError(o)),o}return this.opts=t(r.defaults_options,e),this.opts.mode&&(this.opts.headers=t(r.default_headers[this.opts.mode],this.opts.headers)),this}r.prototype.request=function(e,o){var n=r.getXHR();return n.addEventListener("load",function(){return this.status>=400?void o({message:"The server returned a status code ("+this.status+") that indicates and error.",name:"HTTP Error",status:this.status},void 0,this):void o(null,this.responseText,this)}),n.addEventListener("error",function(){o({message:"Failed to connect to "+e.url,name:"Connection Failed"},void 0,this)}),e=t(this.opts,e),e.data&&r.preparePayload(e),n.withCredentials=e.withCredentials,n.open(e.method,e.url,!0),e.headers&&r.setHeaders(n,e.headers),n.send(e.data),n},r.defineMethod=function(e){var t=e.toLowerCase();r.prototype[t]=function(o,n,a){"function"==typeof n&&(a=n,n=void 0);var s=arguments[3],i=this,d={url:o,data:n,method:e};return this.request(d,function(e,d,p){return i.opts.parse&&p&&(d=r.parseResponse(p)),e?(i.opts.retry&&!s&&(s=r.defaults_options.slice()),s&&s.length?(console.error(e),void setTimeout(function(){i[t](o,n,a,s)},1e3*s.shift())):d?(console.error(e),void a(d)):void a(e)):void a(null,d)}),this}},r.getXHR=function(){return e.ActiveXObject?new e.ActiveXObject("Microsoft.XMLHTTP"):new e.XMLHttpRequest},r.preparePayload=function(e){return"GET"===e.method&&e.data?(e.url+="?"+r.toQueryString(e.data),delete e.data,e):"json"===e.mode&&"object"==typeof e.data?(e.data=JSON.stringify(e.data),e):"form"===e.mode?(e.data instanceof Element?e.data=new FormData(e.data):"object"==typeof e.data&&(e.data=r.toFormData(e.data)),e):("urlencoded"===e.mode&&(e.data=r.toQueryString(e.data)),e)},r.parseResponse=function(e){var t=r.parseHeaders(e.getAllResponseHeaders()),o=t["content-type"],n=e.responseText;if(o&&~o.indexOf("json"))try{return JSON.parse(n)}catch(e){console.error({message:"Failed to parse response as JSON",name:"Parser Error"})}return e.responseXML?e.responseXML:n},r.parseHeaders=function(e){for(var t={},o=e.split(r.regex.line_return),n=o.length,a=0;a<n;a++){var s=o[a].match(r.regex.header);s&&(t[s[1].toLowerCase()]=s[2])}return t},r.parseQueryString=function(e){e=(e||document.location.search).replace(r.regex.query_string,"");for(var t={},o=e.split("&"),n=0;n<o.length;n++){var a=o[n].split("=");t[a[0]]=a[1]}return t},r.setHeaders=function(e,t){if(t)for(var r in t)t.hasOwnProperty(r)&&e.setRequestHeader(r,t[r])},r.toFormData=function(e){var t=new FormData;for(var r in e)e.hasOwnProperty(r)&&t.append(r,e[r]);return t},r.toQueryString=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},r.defaults_options={method:"GET",mode:"json",parse:!0,retry:!1,retryStrategy:[.2,2,8],withCredentials:!1},r.default_headers={json:{"Content-Type":"application/json",Accept:"application/json"},xml:{"Content-Type":"application/xml",Accept:"application/xml"},form:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json, /"},urlencoded:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json, /"}},r.default_methods=["GET","HEAD","POST","PUT","PATCH","DELETE","TRACE","OPTIONS"],r.version="2.0.0",r.regex={header:/([^:]*):\s?(.+)/,line_return:/\r?\n|\r/gm,query_string:/^.*?\?/};for(var o=0;o<r.default_methods.length;o++)r.defineMethod(r.default_methods[o]);e.Reqx=r}(window);