!function(e){"use strict";function t(){for(var e={},r=0;r<arguments.length;r++)for(var n in arguments[r])if(arguments[r].hasOwnProperty(n)){var a=arguments[r][n];"object"!=typeof a||Array.isArray(a)||(a=t(e[n],a)),e[n]=a}return e}function r(e,t){return e.match(t+"$")==t}function n(e){return this.opts=t(n.defaults,e),this.opts.mode&&(this.opts.headers=t(n.default_headers[this.opts.mode],this.opts.headers)),this}n.prototype.request=function(e,r){var a=n.getXHR();return a.addEventListener("load",function(){return this.status>=400?r({message:"The server returned a status code ("+this.status+") that indicates and error.",name:"HTTP Error",status:this.status},void 0,this):void r(null,this.responseText,this)}),a.addEventListener("error",function(){r({message:"Failed to connect to "+e.url,name:"Connection Failed"})}),e=t(this.opts,e),e.data&&n.preparePayload(e),a.withCredentials=e.withCredentials,a.open(e.method,e.url,!0),e.headers&&n.setHeaders(a,e.headers),a.send(e.data),a},n.defineMethod=function(e){n.prototype[e.toLowerCase()]=function(t,r,a){"function"==typeof r&&(a=r,r=void 0);var o=this;return this.request({url:t,data:r,method:e},function(e,t,r){if(o.opts.parse&&r&&(t=n.parseResponse(r)),e){if(t)return console.error(e),a(t);a(e)}a(null,t)}),this}},n.getXHR=function(){return e.ActiveXObject?new e.ActiveXObject("Microsoft.XMLHTTP"):new e.XMLHttpRequest},n.preparePayload=function(e){return"GET"===e.method&&e.data?(e.url+="?"+n.toQueryString(e.data),delete e.data,e):"json"===e.mode&&"object"==typeof e.data?(e.data=JSON.stringify(e.data),e):"form"===e.mode?(e.data instanceof Element?e.data=new FormData(e.data):"object"==typeof e.data&&(e.data=n.toFormData(e.data)),e):("urlencoded"===e.mode&&(e.data=n.toQueryString(e.data)),e)},n.parseResponse=function(e){var t=n.parseHeaders(e.getAllResponseHeaders()),a=t["content-type"],o=e.responseText;if(a&&r(a,"json"))try{return JSON.parse(o)}catch(e){console.error({message:"Failed to parse response as JSON",name:"Parser Error"})}return e.responseXML?e.responseXML:o},n.parseHeaders=function(e){for(var t={},r=e.split(n.regex.line_return),a=r.length,o=0;o<a;o++){var s=r[o].match(n.regex.header);s&&(t[s[1].toLowerCase()]=s[2])}return t},n.parseQueryString=function(e){e=(e||document.location.search).replace(n.regex.query_string,"");for(var t={},r=e.split("&"),a=0;a<r.length;a++){var o=r[a].split("=");t[o[0]]=o[1]}return t},n.setHeaders=function(e,t){if(t)for(var r in t)t.hasOwnProperty(r)&&e.setRequestHeader(r,t[r])},n.toFormData=function(e){var t=new FormData;for(var r in e)e.hasOwnProperty(r)&&t.append(r,e[r]);return t},n.toQueryString=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},n.defaults={method:"GET",mode:"json",parse:!0,withCredentials:!1},n.regex={header:/([^:]*):\s?(.+)/,line_return:/\r?\n|\r/gm,query_string:/^.*?\?/},n.default_headers={json:{"Content-Type":"application/json",Accept:"application/json"},xml:{"Content-Type":"application/xml",Accept:"application/xml"},form:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json, /"},urlencoded:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json, /"}},n.default_methods=["GET","HEAD","POST","PUT","PATCH","DELETE","TRACE","OPTIONS"],n.version="2.0.0";for(var a=0;a<n.default_methods.length;a++)n.defineMethod(n.default_methods[a]);e.Reqx=n}(window);